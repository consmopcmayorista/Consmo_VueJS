<script setup>
import { ref, onMounted } from 'vue';
import { LMap, LTileLayer, LPolygon, LPopup } from '@vue-leaflet/vue-leaflet';

const zoom = ref(12);
const center = ref([6.2442, -75.5812]); // Coordenadas de Medellín
const mapReady = ref(false);

const comunas = ref([
  {
    nombre: "Popular",
    coordenadas: [
      [6.299216736280499, -75.54364001221917],
      [6.2945995078281385, -75.54383211480682],
      [6.289088228517883, -75.54383495073482],
      [6.2828561129964555, -75.544134332102],
      [6.2848509118274904, -75.55340118700735],
      [6.295199630574388, -75.551283919896],
      [6.299229004690446, -75.54892540019148],
      [6.298928622798513, -75.54916677381586]
    ],
    color: "#FF6347",
    precioDomicilio: 15000
  },
  {
    nombre: "Santa Cruz",
    coordenadas: [
      [6.3021989610836044, -75.55624349498348],
      [6.296889637725528, -75.5578823604878],
      [6.2950193494447575, -75.56031024059484],
      [6.286756177301015, -75.56449633070024],
      [6.284910169545341, -75.55370352741133],
      [6.286413799281036, -75.5533399864236],
      [6.2917701805815796, -75.55231162905585],
      [6.295380147520447, -75.55146468543327],
      [6.299169240029897, -75.54910619367301],
      [6.300077626956252, -75.5512774010172],
      [6.302138623559074, -75.55624349567128]
    ],
    color: "#00BFFF",
    precioDomicilio: 13000
  },
  {
    nombre: "Aranjuez",
    coordenadas: [
      [6.28634829170727, -75.56420977620424],
      [6.28421543888274, -75.55113493985381],
      [6.26977867139432, -75.55312329383916],
      [6.269892331447878, -75.55572196040934],
      [6.2725329916510475, -75.56997816130246],
      [6.2757310401330955, -75.56925041134762],
      [6.280196872990203, -75.56827904549677],
      [6.284784019010289, -75.5668224409114],
      [6.286288129282951, -75.56445257460396]
    ],
    color: "#32CD32",
    precioDomicilio: 12000
  },
  {
    nombre: "Manrique",
    coordenadas: [
      [6.284034687183734, -75.55101458705442],
      [6.283869311870049, -75.55118766738428],
      [6.28216288935333, -75.54455448180514],
      [6.272520797957711, -75.54256321545832],
      [6.261594640225894, -75.54189142216133],
      [6.262670401953287, -75.55486256097899]
    ],
    color: "#FFD700",
    precioDomicilio: 13000
  },
  {
    nombre: "Poblado",
    coordenadas: [
    [6.238785699148664, -75.57655744222679],
    [6.233540019554823, -75.57505588385139],
    [6.2267589413756355, -75.57587101554104],
    [6.221171949531367, -75.5764287372234],
    [6.208249182884273, -75.57848800440665],
    [6.199676446810642, -75.57964634736128],
    [6.195112795684466, -75.58110500406885],
    [6.193150840080662, -75.576471622225],
    [6.18368216927928, -75.57964634564748],
    [6.178307983387754, -75.56004028342986],
    [6.1787771858478635, -75.55407691188387],
    [6.18568683726491, -75.55270405851186],
    [6.188587157868682, -75.54652621833866],
    [6.198311646278071, -75.54674072689211],
    [6.200145630542082, -75.5439950201481],
    [6.203685628643797, -75.54309408512289],
    [6.207780054625829, -75.54438113515876],
    [6.213663210769141, -75.54747832725158],
    [6.216240765602706, -75.55282265501461],
    [6.22086982834513, -75.55837866359893],
    [6.224446857956565, -75.56150066662325],
    [6.226919194186593, -75.56240022805457],
    [6.229654578004727, -75.5664218195872],
    [6.235440887725446, -75.56832679523187],
    [6.238860048745806, -75.57658159650944],
    [6.235756514769122, -75.57573495011538]
  ],
    color: "#8A2BE2",
    precioDomicilio: 13000
  },
  {
    nombre: "Candelaria",
    coordenadas: [
    [6.2724913081850815, -75.56989654732519],
    [6.269653709446999, -75.55373662182222],
    [6.262850159358891, -75.55505356132807],
    [6.2601009778136785, -75.55913339699778],
    [6.254908896926111, -75.56108131283274],
    [6.246775312315563, -75.56561163209071],
    [6.239206547979023, -75.56977841077781],
    [6.236927104790823, -75.57054259701933],
    [6.238826088257895, -75.57665517371139],
    [6.248094512220945, -75.57979287805861],
    [6.257977350850979, -75.57451991552144],
    [6.268083853394813, -75.57107986804823],
    [6.272340528133043, -75.56993272650526]
  ],
    color: "#FF1493",
    precioDomicilio: 12000
  },
  {
    nombre: "Villa Hermosa",
    coordenadas: [
    [6.261806332609552, -75.54803701342558],
    [6.258168020118887, -75.54876904253672],
    [6.254737698716198, -75.55038981181127],
    [6.253022477287885, -75.55525279455249],
    [6.250891221564814, -75.55483446092929],
    [6.251359080867573, -75.55180154498319],
    [6.253542011277474, -75.54474360495735],
    [6.2514111442681894, -75.54254806732095],
    [6.246213916957345, -75.5412931025418],
    [6.242991985626105, -75.53988141990229],
    [6.240029437667388, -75.54453344645157],
    [6.243148452204167, -75.55295222600098],
    [6.245955716179921, -75.56053497758953],
    [6.249282765734307, -75.56419567864094],
    [6.255728704539294, -75.56048259968603],
    [6.259991183106408, -75.55922743154677],
    [6.262433970167265, -75.55499156844786],
    [6.261809328128578, -75.54788030221675]
  ],
    color: "#00FF00",
    precioDomicilio: 12000
  },
  {
    nombre: "Buenos Aires",
    coordenadas: [
    [6.248982236260034, -75.56407030145485],
    [6.245766277661332, -75.56077658829793],
    [6.239862503719436, -75.54474323843324],
    [6.236653707070531, -75.5418732138655],
    [6.230771090129906, -75.54341618358944],
    [6.227868981804136, -75.55279827066252],
    [6.2289652494842045, -75.56024054099521],
    [6.227033935173907, -75.56235849527778],
    [6.229648127580717, -75.56648674502915],
    [6.235373910042, -75.56819820622603],
    [6.23671890296778, -75.57067590309256],
    [6.248879087571339, -75.56414195527113]
  ],
    color: "#FF4500",
    precioDomicilio: 13000
  },
  {
    nombre: "Guayabal",
    coordenadas: [
    [6.23688104645602, -75.57692003396359],
    [6.23614019218725, -75.58860892380707],
    [6.234675048830795, -75.59212039907987],
    [6.228670176131274, -75.5914535833037],
    [6.21889387677669, -75.59366948528552],
    [6.216651742172573, -75.59533652269037],
    [6.213863677765644, -75.59623868532957],
    [6.215091987681873, -75.59927858117831],
    [6.2108873149604875, -75.60216299559978],
    [6.204198687993198, -75.6015083720428],
    [6.201442491506796, -75.59540230329512],
    [6.196680158926341, -75.59540322410342],
    [6.190835272219601, -75.5986693131486],
    [6.191525740417717, -75.59211386337888],
    [6.187100450974086, -75.5859214117653],
    [6.1888318760555165, -75.58379304077414],
    [6.196719899788775, -75.5814637880259],
    [6.20480472703882, -75.57952639807594],
    [6.2311068754042935, -75.57573408760541],
    [6.234524929686842, -75.57613315975183],
    [6.236873293291993, -75.57692407549304]
  ],
    color: "#9932CC",
    precioDomicilio: 12000
  },
  {
    nombre: "Belen",
    coordenadas: [
    [6.236888508249194, -75.57731905910444],
    [6.2364295016695905, -75.58577222051827],
    [6.236166323079871, -75.58861408371524],
    [6.234721119349786, -75.59211606106359],
    [6.228682275285408, -75.59152199474687],
    [6.224153475565672, -75.5925125022403],
    [6.219001658193804, -75.59365438599484],
    [6.21664889855937, -75.59536379142506],
    [6.2139039897484025, -75.59628403242786],
    [6.215149379294118, -75.59937140822495],
    [6.21090749997515, -75.60212749502313],
    [6.210786778248192, -75.60579611863416],
    [6.217115957636423, -75.60599773340566],
    [6.219796260293265, -75.60500102253846],
    [6.221231975105681, -75.60978796762662],
    [6.225014724850936, -75.60801254528282],
    [6.226645980581111, -75.60716591799354],
    [6.22899267320868, -75.60939083989716],
    [6.231138714440561, -75.61547141914508],
    [6.234529232722949, -75.61632907663162],
    [6.236684147989294, -75.6129929025228],
    [6.237406700725771, -75.60965578790247],
    [6.2387987135844725, -75.60383610363965],
    [6.240376995487608, -75.59740105272951],
    [6.241944723586315, -75.59707200452695],
    [6.239144244098483, -75.58977346601887],
    [6.23967172879118, -75.57792804391077],
    [6.236726452240461, -75.57681103526102]
  ],
    color: "#20B2AA",
    precioDomicilio: 13000
  },
  {
    nombre: "San Javier",
    coordenadas: [
    [6.264290284953972, -75.6033602912586],
    [6.259543596883901, -75.60525113368966],
    [6.257791452802806, -75.60457812197727],
    [6.257759595583366, -75.60499474827574],
    [6.254860580479161, -75.60704583159054],
    [6.253076563193119, -75.61085956463029],
    [6.251324397433976, -75.61226968441025],
    [6.249667810268065, -75.6119812551536],
    [6.247342192014244, -75.6141605311762],
    [6.245367001271632, -75.61528221736464],
    [6.244411261140513, -75.61563474730964],
    [6.2435192354442535, -75.61845498686789],
    [6.243678525858272, -75.62226871990765],
    [6.245730153320608, -75.62584527334978],
    [6.246857571181309, -75.63039456545891],
    [6.2505937023861975, -75.6311757980263],
    [6.2517207580939385, -75.62964034455094],
    [6.255319261199546, -75.63132529121128],
    [6.2559609099383096, -75.6292146312573],
    [6.258148256663688, -75.6314824345485],
    [6.260481009208689, -75.62963765467059],
    [6.265694784389382, -75.62025116945985],
    [6.269497730242591, -75.61330451779645],
    [6.265346676337984, -75.60942683856157],
    [6.265920332811845, -75.60689828162093],
    [6.26535790095933, -75.60401241495464],
    [6.2639378683794575, -75.60336428451816],
    [6.259628049826759, -75.60531296420058]
  ],
    color: "#FF6347",
    precioDomicilio: 13000
  },
  {
    nombre: "Robledo",
    coordenadas: [
    [6.295928003095241, -75.58456907431702],
    [6.290777968066422, -75.58655216171469],
    [6.28914698826631, -75.58837734965691],
    [6.292556800089059, -75.59317872891465],
    [6.292548330712123, -75.59649041497389],
    [6.290950555653254, -75.5967632218103],
    [6.288009987680951, -75.59731060810181],
    [6.284239185074156, -75.59570374350355],
    [6.28252137736267, -75.59444202563583],
    [6.279454859470491, -75.5978839736327],
    [6.276095892580429, -75.60007225637237],
    [6.274004030509346, -75.598080767724],
    [6.271530480552329, -75.59390163759508],
    [6.264079821021426, -75.58661095553627],
    [6.25990345356297, -75.58177380119719],
    [6.258899647774683, -75.57720562028763],
    [6.260163818740963, -75.5739100253075],
    [6.263977419406643, -75.5728107267965],
    [6.268883591859833, -75.57171928235707],
    [6.273153255924015, -75.5704335730946],
    [6.275607208240686, -75.56988242814828],
    [6.275967626272319, -75.57263182894285],
    [6.280381191334769, -75.57859846968134],
    [6.291397611901772, -75.5737875715252],
    [6.296124828754898, -75.58445926921856]
  ],
    color: "#7FFF00",
    precioDomicilio: 12000
  },
  {
    nombre: "La America",
    coordenadas: [
    [6.2576266886165115, -75.60487332629272],
    [6.254782514867898, -75.60695405826118],
    [6.2531464454278165, -75.61058819926993],
    [6.251341125017859, -75.61231268842577],
    [6.2497085174629206, -75.61187657285768],
    [6.247392904476229, -75.61411630986193],
    [6.245337288697868, -75.61531787837842],
    [6.24387861417884, -75.61436677222946],
    [6.243337739897541, -75.60720773397162],
    [6.23947235407536, -75.60919593946424],
    [6.23808674675314, -75.60781422181778],
    [6.239267955414647, -75.60123170875912],
    [6.240381433132541, -75.59741377270161],
    [6.242193550955719, -75.59706734508484],
    [6.257626614768668, -75.60478664352229]
  ],
    color: "#D2691E",
    precioDomicilio: 11000
  },
  {
    nombre: "Laureles",
    coordenadas: [
    [6.274902625143241, -75.59959513520681],
    [6.265100820060667, -75.60291876645519],
    [6.259549411547894, -75.60526206659065],
    [6.250472038658515, -75.60133544697644],
    [6.241832595536877, -75.59680581727365],
    [6.238975183188046, -75.58955383030813],
    [6.239501673157946, -75.58169589705705],
    [6.239574239510418, -75.5776832040159],
    [6.248368451624458, -75.5801719580187],
    [6.259423809875216, -75.57457050397242],
    [6.258963680716818, -75.57714717727686],
    [6.259715506556617, -75.58206560221731],
    [6.2628815149314505, -75.5853429798306],
    [6.266760881659351, -75.58923778679092],
    [6.2713607999649525, -75.59377513523577],
    [6.2740387289327515, -75.59822225290576],
    [6.275268774304962, -75.59935658985438],
    [6.274820320600128, -75.59958861332143]
  ],
    color: "#DC143C",
    precioDomicilio: 11000
  },
  {
    nombre: "Doce de Octubre",
    coordenadas: [
    [6.291315223176525, -75.57392066026344],
    [6.296029476007277, -75.5844241861424],
    [6.305879743233035, -75.58067514645202],
    [6.312642908069662, -75.57708420190474],
    [6.313295107449704, -75.57436531688452],
    [6.313314722957983, -75.57218663790866],
    [6.313138297380036, -75.56948218781076],
    [6.312426462728041, -75.56660435269177],
    [6.310972533827368, -75.56502722363405],
    [6.308498872068611, -75.56689042373313],
    [6.301292511889372, -75.56974715610521],
    [6.292802566046433, -75.57275218818427],
    [6.290973850696233, -75.5737579986452]
  ],
    color: "#4169E1",
    precioDomicilio: 14000
  },
  {
    nombre: "Castilla",
    coordenadas: [
    [6.308723755665042, -75.558205932429],
    [6.310901798892388, -75.56567531782652],
    [6.304409533265741, -75.56869042662403],
    [6.2972766784653516, -75.571315716097],
    [6.291848249607995, -75.57367197617843],
    [6.2863132662776025, -75.57575570543555],
    [6.280163981581239, -75.57857636776274],
    [6.275867087898391, -75.57299883905617],
    [6.275496473282573, -75.57007180602166],
    [6.2911091768880425, -75.56552841421042],
    [6.2975454751527025, -75.56096768345787],
    [6.304175012703993, -75.55775558753483],
    [6.3087015661104715, -75.55773887209781]
  ],
  color: "#A52A2A",
    precioDomicilio: 12000
  }
]);

onMounted(() => {
  mapReady.value = true;
});
</script>

<template>
  <div style="height: 500px; width: 100%; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);">
    <l-map v-if="mapReady" :zoom="zoom" :center="center" style="height: 100%; border-radius: 10px;">
      <l-tile-layer
        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        layer-type="base"
        name="OpenStreetMap"
      ></l-tile-layer>
      
      <!-- Polígonos para cada comuna -->
      <l-polygon 
        v-for="comuna in comunas"
        :key="comuna.nombre"
        :lat-lngs="comuna.coordenadas"
        :color="comuna.color"
        :fill-color="comuna.color"
        :fill-opacity="0.3"
        :weight="2"
      >
        <l-popup>
          <strong>{{ comuna.nombre }}</strong><br>
          Precio de domicilio: ${{ comuna.precioDomicilio.toLocaleString() }}
        </l-popup>
      </l-polygon>
    </l-map>
  </div>
</template>

<style>
@import 'leaflet/dist/leaflet.css';

/* Estilo opcional para una mejor presentación */
.leaflet-popup-content-wrapper {
  background-color: rgba(255, 255, 255, 0.8);
  border-radius: 5px;
}

.leaflet-popup-content {
  margin: 10px;
  font-family: Arial, sans-serif;
}
</style>